
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ASTM Demonstration &#8212; PVDEG Tutorials</title>



  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />


  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials_and_tools/ASTM Live Demo';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="LETID - Passivated Wafer" href="LETID%20-%20Passivated%20Wafer.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>


  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">



  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>

  <div id="pst-scroll-pixel-helper"></div>

  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>


  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>

  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>

  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">



      <div class="bd-sidebar-primary bd-sidebar">



  <div class="sidebar-header-items sidebar-primary__section">




  </div>

    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">



<a class="navbar-brand logo" href="../intro.html">










    <img src="../_static/PVD_logo.png" class="logo__image only-light" alt="PVDEG Tutorials - Home"/>
    <script>document.write(`<img src="../_static/PVD_logo.png" class="logo__image only-dark" alt="PVDEG Tutorials - Home"/>`);</script>


</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">

        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to the PVDEG Tutorials and Tools
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1%20-%20Basics%2C%20Humidity%2C%20Design.html">1 - Basics, Humidity, Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="2%20-%20Degradation.html">2 - Degradation</a></li>
<li class="toctree-l1"><a class="reference internal" href="3%20-%20Spectral%20Degradation.html">3 - Spectral Degradation</a></li>
<li class="toctree-l1"><a class="reference internal" href="4%20-%20Weather%20Database%20Access.html">4 - Weather Database Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools%20-%20Module%20Standoff%20for%20IEC%20TS%2063126.html">Tools - Module Standoff for IEC TS 63126</a></li>
<li class="toctree-l1"><a class="reference internal" href="B-O%20LID%20-%20Accelerated%20Test.html">B-O LID - Accelerated Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="LETID%20-%20Accelerated%20Test.html">LETID - Accelerated Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="LETID%20-%20Outdoor%20LETID.html">LETID - Outdoor Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="LETID%20-%20Outdoor%20Scenario%20Based%20on%20Accelerated%20Test%20Result.html">LETID - Outdoor Scenario Based on Accelerated Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="LETID%20-%20Passivated%20Wafer.html">LETID - Passivated Wafer</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ASTM Demonstration</a></li>
</ul>

    </div>
</nav></div>
    </div>


  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>

  <div id="rtd-footer-container"></div>


      </div>

      <main id="main-content" class="bd-main">



<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">

              <div class="bd-header-article">
<div class="header-article-items header-article__inner">

    <div class="header-article-items__start">

        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>

    </div>


    <div class="header-article-items__end">

        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">



      <li><a href="https://colab.research.google.com/github/NREL/PVDegradationTools/blob/main/pvdeg_tutorials/tutorials_and_tools/ASTM Live Demo.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">

    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>




      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>

  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">



      <li><a href="https://github.com/NREL/PVDegradationTools" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>




      <li><a href="https://github.com/NREL/PVDegradationTools/issues/new?title=Issue%20on%20page%20%2Ftutorials_and_tools/ASTM Live Demo.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>

  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">



      <li><a href="../_sources/tutorials_and_tools/ASTM Live Demo.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>




      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>

  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>

    </div>

</div>
</div>



<div id="jb-print-docs-body" class="onlyprint">
    <h1>ASTM Demonstration</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">

            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-weather-data">1. Import Weather Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where-to-get-free-solar-irradiance-data">Where to get <em>Free</em> Solar Irradiance Data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where-else-can-you-get-historical-irradiance-data">Where else can you get historical irradiance data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nrel-api-key">NREL API Key</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#application-programming-interface-api">Application Programming Interface (API)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fetching-tmys-from-the-nsrdb">Fetching TMYs from the NSRDB</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-installation-standoff-level-1">2. Calculate Installation Standoff - Level 1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-installation-standoff-level-2">3. Calculate Installation Standoff - Level 2</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>



<div id="searchbox"></div>
                <article class="bd-article">

  <section class="tex2jax_ignore mathjax_ignore" id="astm-demonstration">
<h1>ASTM Demonstration<a class="headerlink" href="#astm-demonstration" title="Link to this heading">#</a></h1>
<p><img alt="PVDeg Logo" src="../_images/PVD_logo.png" /></p>
<p><strong>Steps:</strong></p>
<ol class="arabic simple">
<li><p>Import weather data</p></li>
<li><p>Calculate installation standoff</p></li>
<li><p>Calculate installation standoff - with more detail</p></li>
</ol>
<p><strong>Background:</strong></p>
<p>This example demonstrates the calculation of a minimum standoff distance necessary for roof-mounted PV modules to ensure that the <span class="math notranslate nohighlight">\(T_{98}\)</span> operational temperature remains under 70°C, in which case the more rigorous thermal stability testing requirements of IEC TS 63126 would not needed to be considered. We use data from [Fuentes, 1987] to model the approximate exponential decay in temperature, <span class="math notranslate nohighlight">\(T(X)\)</span>, with increasing standoff distance, <span class="math notranslate nohighlight">\(X\)</span>, as,</p>
<div class="math notranslate nohighlight">
\[ X = -X_0 \ln\left(1-\frac{T_0-T}{\Delta T}\right)\]</div>
<p>where <span class="math notranslate nohighlight">\(T_0\)</span> is the temperature for <span class="math notranslate nohighlight">\(X=0\)</span> (insulated back) and <span class="math notranslate nohighlight">\(\Delta T\)</span> is the temperature difference between an insulated back (<span class="math notranslate nohighlight">\(X=0\)</span>) and open rack mounting configuration (<span class="math notranslate nohighlight">\(X=\infty)\)</span>.</p>
<p>The following figure showcases this calulation for the entire United States. We used pvlib and data from the National Solar Radiation Database (NSRDB) to calculate the module temperatures for different mounting configuration and applied our model to obtain the standoff distance for roof-mounted PV systems.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># if running on google colab, uncomment the next line and execute this cell to install the dependencies and prevent &quot;ModuleNotFoundError&quot; in later cells:</span>
<span class="c1">#!pip install pvdeg==0.1.0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pvlib</span>
<span class="kn">import</span> <span class="nn">pvdeg</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pvdeg</span> <span class="kn">import</span> <span class="n">DATA_DIR</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This information helps with debugging and getting support :)</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">platform</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Working on a &quot;</span><span class="p">,</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">(),</span> <span class="n">platform</span><span class="o">.</span><span class="n">release</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Python version &quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pandas version &quot;</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pvlib version &quot;</span><span class="p">,</span> <span class="n">pvlib</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pvdeg version &quot;</span><span class="p">,</span> <span class="n">pvdeg</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Working on a  Windows 10
Python version  3.11.7 | packaged by Anaconda, Inc. | (main, Dec 15 2023, 18:05:47) [MSC v.1916 64 bit (AMD64)]
Pandas version  2.2.0
pvlib version  0.10.3
pvdeg version  0.2.4.dev83+ge2ceab9.d20240422
</pre></div>
</div>
</div>
</div>
<section id="import-weather-data">
<h2>1. Import Weather Data<a class="headerlink" href="#import-weather-data" title="Link to this heading">#</a></h2>
<p>The function has two minimum requirements:</p>
<ul class="simple">
<li><p>Weather data containing (at least) DNI, DHI, GHI, Temperature, RH, Wind-Speed</p></li>
<li><p>Site meta-data containing (at least) Latitude, Longitude, Time Zone</p></li>
</ul>
<section id="where-to-get-free-solar-irradiance-data">
<h3>Where to get <em>Free</em> Solar Irradiance Data?<a class="headerlink" href="#where-to-get-free-solar-irradiance-data" title="Link to this heading">#</a></h3>
<p>There are many different sources of solar irradiance data. For your projects, these are some of the most common:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://maps.nrel.gov/nsrdb-viewer/">NSRDB</a> - National Solar Radiation Database. You can access data through the website for many locations accross the world, or you can use their <a class="reference external" href="https://developer.nrel.gov/docs/solar/nsrdb/">web API</a> to download data programmatically. An “API” is an <a class="reference external" href="https://en.wikipedia.org/wiki/API">“application programming interface”</a>, and a “web API” is a programming interface that allows you to write code to interact with web services like the NSRDB.</p></li>
<li><p><a class="reference external" href="https://www.energy.gov/eere/buildings/downloads/energyplus-0">EPW</a> - Energy Plus Weather data is available for many locations accross the world. It’s in its own format file (‘EPW’) so you can’t open it easily in a spreadsheet program like Excel, but you can use <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/reference/generated/pvlib.iotools.read_epw.html"><code class="docutils literal notranslate"><span class="pre">pvlib.iotools.read_epw()</span></code></a> to get it into a dataframe and use it.</p></li>
<li><p><a class="reference external" href="https://re.jrc.ec.europa.eu/pvg_tools/en/">PVGIS</a> - Free global weather data provided by the European Union and derived from many govermental agencies including the NSRDB. PVGIS also provides a web API. You can get PVGIS TMY data using <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/reference/generated/pvlib.iotools.get_pvgis_tmy.html"><code class="docutils literal notranslate"><span class="pre">pvlib.iotools.get_pvgis_tmy()</span></code></a>.</p></li>
<li><p>Perhaps another useful link: <a class="reference external" href="https://sam.nrel.gov/weather-data.html">https://sam.nrel.gov/weather-data.html</a></p></li>
</ul>
</section>
<section id="where-else-can-you-get-historical-irradiance-data">
<h3>Where else can you get historical irradiance data?<a class="headerlink" href="#where-else-can-you-get-historical-irradiance-data" title="Link to this heading">#</a></h3>
<p>There are several commercial providers of solar irradiance data. Data is available at different spatial and time resolutions. Each provider offers data under subscription that will provide access to irradiance (and other weather variables) via API to leverage in python.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.solaranywhere.com/">SolarAnywhere</a></p></li>
<li><p><a class="reference external" href="https://solargis.com/">SolarGIS</a></p></li>
<li><p><a class="reference external" href="https://www.vaisala.com/en">Vaisala</a></p></li>
<li><p><a class="reference external" href="https://meteonorm.com/en/">Meteonorm</a></p></li>
<li><p><a class="reference external" href="https://src.dnv.com/">DNV Solar Resource Compass</a></p></li>
</ul>
<p><img alt="NSRDB Example" src="../_images/tutorial_1_NSRDB_example.PNG" /></p>
</section>
<section id="nrel-api-key">
<h3>NREL API Key<a class="headerlink" href="#nrel-api-key" title="Link to this heading">#</a></h3>
<p>At the <a class="reference external" href="https://developer.nrel.gov/">NREL Developer Network</a>, there are <a class="reference external" href="https://en.wikipedia.org/wiki/API">APIs</a> to a lot of valuable <a class="reference external" href="https://developer.nrel.gov/docs/solar/">solar resources</a> like <a class="reference external" href="https://developer.nrel.gov/docs/solar/nsrdb/">weather data from the NSRDB</a>, <a class="reference external" href="https://developer.nrel.gov/docs/solar/pvdaq-v3/">operational data from PVDAQ</a>, or indicative calculations using <a class="reference external" href="https://developer.nrel.gov/docs/solar/pvwatts/">PVWatts</a>. In order to use these resources from NREL, you need to <a class="reference external" href="https://developer.nrel.gov/signup/">register for a free API key</a>. You can test out the APIs using the <code class="docutils literal notranslate"><span class="pre">DEMO_KEY</span></code> but it has limited bandwidth compared to the <a class="reference external" href="https://developer.nrel.gov/docs/rate-limits/">usage limit for registered users</a>. NREL has some <a class="reference external" href="https://developer.nrel.gov/docs/api-key/">API usage instructions</a>, but pvlib has a few builtin functions, like <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/reference/generated/pvlib.iotools.get_psm3.html"><code class="docutils literal notranslate"><span class="pre">pvlib.iotools.get_psm3()</span></code></a>, that wrap the NREL API, and call them for you to make it much easier to use. Skip ahead to the next section to learn more. But before you do…</p>
<p><strong>Please pause now to visit <a class="reference external" href="https://developer.nrel.gov/signup/">https://developer.nrel.gov/signup/</a> and get an API key.</strong></p>
</section>
<section id="application-programming-interface-api">
<h3>Application Programming Interface (API)<a class="headerlink" href="#application-programming-interface-api" title="Link to this heading">#</a></h3>
<p>What exactly is an API? Nowadays, the phrase is used interchangeably with a “web API” but in general an API is just a recipe for how to interface with a application programmatically, <em>IE</em>: in code. An API could be as simple as a function signature or its published documentation, <em>EG</em>: the API for the <code class="docutils literal notranslate"><span class="pre">solarposition</span></code> function is you give it an ISO8601 formatted date with a timezone, the latitude, longitude, and elevation as numbers, and it returns the zenith and azimuth as numbers.</p>
<p>A web API is the same, except the application is a web service, that you access at its URL using web methods. We won’t go into too much more detail here, but the most common web method is <code class="docutils literal notranslate"><span class="pre">GET</span></code> which is pretty self explanatory. Look over the <a class="reference external" href="https://developer.nrel.gov/docs/api-key/">NREL web usage instructions</a> for some examples, but interacting with a web API can be as easy as entering a URL into a browser. Try the URL below to <em>get</em> the PVWatts energy output for a fixed tilt site in <a class="reference external" href="https://goo.gl/maps/awkEcNGzSur9Has18">Broomfield, CO</a>.</p>
<p><a class="reference external" href="https://developer.nrel.gov/api/pvwatts/v6.json?api_key=DEMO_KEY&amp;amp;lat=40&amp;amp;lon=-105&amp;amp;system_capacity=4&amp;amp;azimuth=180&amp;amp;tilt=40&amp;amp;array_type=1&amp;amp;module_type=1&amp;amp;losses=10">https://developer.nrel.gov/api/pvwatts/v6.json?api_key=DEMO_KEY&amp;lat=40&amp;lon=-105&amp;system_capacity=4&amp;azimuth=180&amp;tilt=40&amp;array_type=1&amp;module_type=1&amp;losses=10</a></p>
<p>In addition to just using your browser, you can also access web APIs programmatically. The most popular Python package to interact with web APIs is <a class="reference external" href="https://docs.python-requests.org/en/master/">requests</a>. There’s also free open source command-line tools like <a class="reference external" href="https://curl.se/">cURL</a> and <a class="reference external" href="https://httpie.io/">HTTPie</a>, and a popular nagware/freemium GUI application called <a class="reference external" href="https://www.postman.com/">Postman</a>.</p>
<p><strong>If you have an NREL API key please enter it in the next cell.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NREL_API_KEY</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># &lt;-- please set your NREL API key here</span>

<span class="c1"># note you must use &quot;quotes&quot; around your key, for example:</span>
<span class="c1"># NREL_API_KEY = &#39;DEMO_KEY&#39;  # single or double both work fine</span>

<span class="c1"># during the live tutorial, we&#39;ve stored a dedicated key on our server</span>
<span class="k">if</span> <span class="n">NREL_API_KEY</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">NREL_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;NREL_API_KEY&#39;</span><span class="p">]</span>  <span class="c1"># get dedicated key for tutorial from servier</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">NREL_API_KEY</span> <span class="o">=</span> <span class="s1">&#39;DEMO_KEY&#39;</span>  <span class="c1"># OK for this demo, but better to get your own key</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="fetching-tmys-from-the-nsrdb">
<h2>Fetching TMYs from the NSRDB<a class="headerlink" href="#fetching-tmys-from-the-nsrdb" title="Link to this heading">#</a></h2>
<p>The NSRDB, one of many sources of weather data intended for PV modeling, is free and easy to access using pvlib. As an example, we’ll fetch a TMY dataset for Phoenix, AZ at coordinates <a class="reference external" href="https://goo.gl/maps/hGV92QHCm5FHJKbf9">(33.4484, -112.0740)</a>.</p>
<p>This function uses <a class="reference external" href="https://pvdegradationtools.readthedocs.io/en/latest/_autosummary/pvdeg.weather.html#pvdeg.weather.get"><code class="docutils literal notranslate"><span class="pre">pvdeg.weather.get()</span></code></a>, which returns a Python dictionary of metadata and a Pandas dataframe of the timeseries weather data.</p>
<p>This function internally leverages  <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/reference/generated/pvlib.iotools.get_psm3.html"><code class="docutils literal notranslate"><span class="pre">pvlib.iotools.get_psm3()</span></code></a>. However, for some of the NSRDB data relative humidity is not a given parameter, and <code class="docutils literal notranslate"><span class="pre">pvdeg</span></code> calculates  the values from the downloaded data as an internal processing step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell does not run on a Collab instal. WE are troubleshooting it, but the next cell performs the same request directly with PVLib.</span>
<span class="c1"># If TMY is requested though, relative_humidity will not be included as NSRDB TMY dataset does not have it.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">weather_db = &#39;PSM3&#39;</span>
<span class="sd">weather_id = (33.4484, -112.0740)</span>
<span class="sd">weather_arg = {&#39;api_key&#39;: NREL_API_KEY,</span>
<span class="sd">               &#39;email&#39;: &#39;user@mail.com&#39;,</span>
<span class="sd">               &#39;names&#39;: &#39;2021&#39;,   # tmy is another common option; right now requesting only 2021 data</span>
<span class="sd">               &#39;attributes&#39;: [],  # grabs all. to select, could be &#39;air_temperature&#39;, &#39;dew_point&#39;, &#39;dhi&#39;,</span>
<span class="sd">               # &#39;dni&#39;, &#39;ghi&#39;, &#39;surface_albedo&#39;, &#39;surface_pressure&#39;, &#39;wind_direction&#39;, &#39;wind_speed&#39;</span>
<span class="sd">               &#39;map_variables&#39;: True,</span>
<span class="sd">               &#39;leap_day&#39;: False}</span>

<span class="sd">weather_df, meta = pvdeg.weather.get(weather_db, weather_id, **weather_arg)</span>
<span class="sd">&#39;&#39;&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weather_df</span><span class="p">,</span> <span class="n">meta</span> <span class="o">=</span> <span class="n">pvlib</span><span class="o">.</span><span class="n">iotools</span><span class="o">.</span><span class="n">get_psm3</span><span class="p">(</span>
    <span class="n">latitude</span><span class="o">=</span><span class="mf">33.4484</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=-</span><span class="mf">112.0740</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">NREL_API_KEY</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="s1">&#39;silvana.ovaitt@nrel.gov&#39;</span><span class="p">,</span>  <span class="c1"># &lt;-- any email works here fine</span>
    <span class="n">names</span><span class="o">=</span><span class="s1">&#39;2021&#39;</span><span class="p">,</span>
    <span class="n">map_variables</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">leap_day</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weather_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Hour</th>
      <th>Minute</th>
      <th>temp_air</th>
      <th>dhi_clear</th>
      <th>dni_clear</th>
      <th>ghi_clear</th>
      <th>Cloud Type</th>
      <th>...</th>
      <th>ghi</th>
      <th>relative_humidity</th>
      <th>solar_zenith</th>
      <th>albedo</th>
      <th>pressure</th>
      <th>precipitable_water</th>
      <th>wind_direction</th>
      <th>wind_speed</th>
      <th>Global Horizontal UV Irradiance (280-400nm)</th>
      <th>Global Horizontal UV Irradiance (295-385nm)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-01-01 00:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>30</td>
      <td>6.5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0</td>
      <td>35.09</td>
      <td>169.51</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>38.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 01:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>30</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>36.34</td>
      <td>163.48</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>42.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 02:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>30</td>
      <td>5.5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>37.37</td>
      <td>152.07</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>45.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 03:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>30</td>
      <td>5.1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>38.47</td>
      <td>139.71</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>46.0</td>
      <td>1.7</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 04:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>30</td>
      <td>4.7</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0</td>
      <td>39.97</td>
      <td>127.21</td>
      <td>0.16</td>
      <td>969.0</td>
      <td>1.0</td>
      <td>46.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-12-31 19:30:00-07:00</th>
      <td>2021</td>
      <td>12</td>
      <td>31</td>
      <td>19</td>
      <td>30</td>
      <td>9.1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7</td>
      <td>...</td>
      <td>0.0</td>
      <td>27.14</td>
      <td>114.11</td>
      <td>0.16</td>
      <td>967.0</td>
      <td>0.9</td>
      <td>28.0</td>
      <td>1.2</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-12-31 20:30:00-07:00</th>
      <td>2021</td>
      <td>12</td>
      <td>31</td>
      <td>20</td>
      <td>30</td>
      <td>8.5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7</td>
      <td>...</td>
      <td>0.0</td>
      <td>28.57</td>
      <td>126.45</td>
      <td>0.16</td>
      <td>967.0</td>
      <td>0.9</td>
      <td>31.0</td>
      <td>1.3</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-12-31 21:30:00-07:00</th>
      <td>2021</td>
      <td>12</td>
      <td>31</td>
      <td>21</td>
      <td>30</td>
      <td>7.8</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7</td>
      <td>...</td>
      <td>0.0</td>
      <td>29.85</td>
      <td>138.95</td>
      <td>0.16</td>
      <td>967.0</td>
      <td>0.9</td>
      <td>33.0</td>
      <td>1.4</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-12-31 22:30:00-07:00</th>
      <td>2021</td>
      <td>12</td>
      <td>31</td>
      <td>22</td>
      <td>30</td>
      <td>7.4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7</td>
      <td>...</td>
      <td>0.0</td>
      <td>31.44</td>
      <td>151.32</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>33.0</td>
      <td>1.5</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-12-31 23:30:00-07:00</th>
      <td>2021</td>
      <td>12</td>
      <td>31</td>
      <td>23</td>
      <td>30</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0</td>
      <td>33.22</td>
      <td>162.85</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>34.0</td>
      <td>1.6</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>8760 rows × 24 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Source&#39;: &#39;NSRDB&#39;,
 &#39;Location ID&#39;: &#39;323705&#39;,
 &#39;City&#39;: &#39;-&#39;,
 &#39;State&#39;: &#39;-&#39;,
 &#39;Country&#39;: &#39;-&#39;,
 &#39;Time Zone&#39;: -7,
 &#39;Local Time Zone&#39;: -7,
 &#39;Clearsky DHI Units&#39;: &#39;w/m2&#39;,
 &#39;Clearsky DNI Units&#39;: &#39;w/m2&#39;,
 &#39;Clearsky GHI Units&#39;: &#39;w/m2&#39;,
 &#39;Dew Point Units&#39;: &#39;c&#39;,
 &#39;DHI Units&#39;: &#39;w/m2&#39;,
 &#39;DNI Units&#39;: &#39;w/m2&#39;,
 &#39;GHI Units&#39;: &#39;w/m2&#39;,
 &#39;Solar Zenith Angle Units&#39;: &#39;Degree&#39;,
 &#39;Temperature Units&#39;: &#39;c&#39;,
 &#39;Pressure Units&#39;: &#39;mbar&#39;,
 &#39;Relative Humidity Units&#39;: &#39;%&#39;,
 &#39;Precipitable Water Units&#39;: &#39;cm&#39;,
 &#39;Wind Direction Units&#39;: &#39;Degrees&#39;,
 &#39;Wind Speed Units&#39;: &#39;m/s&#39;,
 &#39;Cloud Type -15&#39;: &#39;N/A&#39;,
 &#39;Cloud Type 0&#39;: &#39;Clear&#39;,
 &#39;Cloud Type 1&#39;: &#39;Probably Clear&#39;,
 &#39;Cloud Type 2&#39;: &#39;Fog&#39;,
 &#39;Cloud Type 3&#39;: &#39;Water&#39;,
 &#39;Cloud Type 4&#39;: &#39;Super-Cooled Water&#39;,
 &#39;Cloud Type 5&#39;: &#39;Mixed&#39;,
 &#39;Cloud Type 6&#39;: &#39;Opaque Ice&#39;,
 &#39;Cloud Type 7&#39;: &#39;Cirrus&#39;,
 &#39;Cloud Type 8&#39;: &#39;Overlapping&#39;,
 &#39;Cloud Type 9&#39;: &#39;Overshooting&#39;,
 &#39;Cloud Type 10&#39;: &#39;Unknown&#39;,
 &#39;Cloud Type 11&#39;: &#39;Dust&#39;,
 &#39;Cloud Type 12&#39;: &#39;Smoke&#39;,
 &#39;Fill Flag 0&#39;: &#39;N/A&#39;,
 &#39;Fill Flag 1&#39;: &#39;Missing Image&#39;,
 &#39;Fill Flag 2&#39;: &#39;Low Irradiance&#39;,
 &#39;Fill Flag 3&#39;: &#39;Exceeds Clearsky&#39;,
 &#39;Fill Flag 4&#39;: &#39;Missing CLoud Properties&#39;,
 &#39;Fill Flag 5&#39;: &#39;Rayleigh Violation&#39;,
 &#39;Surface Albedo Units&#39;: &#39;N/A&#39;,
 &#39;Version&#39;: &#39;v3.2.2&#39;,
 &#39;latitude&#39;: 33.45,
 &#39;longitude&#39;: -112.06,
 &#39;altitude&#39;: 334}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weather_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Hour</th>
      <th>Minute</th>
      <th>temp_air</th>
      <th>dhi_clear</th>
      <th>dni_clear</th>
      <th>ghi_clear</th>
      <th>Cloud Type</th>
      <th>...</th>
      <th>ghi</th>
      <th>relative_humidity</th>
      <th>solar_zenith</th>
      <th>albedo</th>
      <th>pressure</th>
      <th>precipitable_water</th>
      <th>wind_direction</th>
      <th>wind_speed</th>
      <th>Global Horizontal UV Irradiance (280-400nm)</th>
      <th>Global Horizontal UV Irradiance (295-385nm)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-01-01 00:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>30</td>
      <td>6.5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0</td>
      <td>35.09</td>
      <td>169.51</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>38.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 01:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>30</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>36.34</td>
      <td>163.48</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>42.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 02:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>30</td>
      <td>5.5</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>37.37</td>
      <td>152.07</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>45.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 03:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>30</td>
      <td>5.1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4</td>
      <td>...</td>
      <td>0.0</td>
      <td>38.47</td>
      <td>139.71</td>
      <td>0.16</td>
      <td>968.0</td>
      <td>1.0</td>
      <td>46.0</td>
      <td>1.7</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2021-01-01 04:30:00-07:00</th>
      <td>2021</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>30</td>
      <td>4.7</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0</td>
      <td>39.97</td>
      <td>127.21</td>
      <td>0.16</td>
      <td>969.0</td>
      <td>1.0</td>
      <td>46.0</td>
      <td>1.8</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 24 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="c1"># Instantiate a second axes that shares the same x-axis</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weather_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-06-28 05:00:00-07:00&#39;</span><span class="p">:</span><span class="s1">&#39;2021-06-28 20:00:00-07:00&#39;</span><span class="p">][</span><span class="s1">&#39;dni_clear&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;DNI&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weather_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-06-28 05:00:00-07:00&#39;</span><span class="p">:</span><span class="s1">&#39;2021-06-28 20:00:00-07:00&#39;</span><span class="p">][</span><span class="s1">&#39;temp_air&#39;</span><span class="p">],</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Temperature&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;DNI&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature $\degree$C&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/107f7fef49ab36e6af4427e6bb3ede63b6f2c49cc28e8bed9978b78a2fc25f9d.png" src="../_images/107f7fef49ab36e6af4427e6bb3ede63b6f2c49cc28e8bed9978b78a2fc25f9d.png" />
</div>
</div>
</section>
<section id="calculate-installation-standoff-level-1">
<h2>2. Calculate Installation Standoff - Level 1<a class="headerlink" href="#calculate-installation-standoff-level-1" title="Link to this heading">#</a></h2>
<p>We use <a class="reference external" href="https://pvdegradationtools.readthedocs.io/en/latest/_autosummary/pvdeg.standards.html#pvdeg.standards.calc_standoff"><code class="docutils literal notranslate"><span class="pre">pvlib.standards.calc_standoff()</span></code></a> which takes at minimum the weather data and metadata, and returns the minimum installation distance in centimeters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">standoff</span> <span class="o">=</span> <span class="n">pvdeg</span><span class="o">.</span><span class="n">standards</span><span class="o">.</span><span class="n">standoff</span><span class="p">(</span><span class="n">weather_df</span><span class="o">=</span><span class="n">weather_df</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The array tilt angle was not provided, therefore the latitude tilt of 33.5 was used.
The array azimuth was not provided, therefore an azimuth of 180.0 was used.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Minimum installation distance:&quot;</span><span class="p">,</span> <span class="n">standoff</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Minimum installation distance: 0    11.12151
Name: x, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="calculate-installation-standoff-level-2">
<h2>3. Calculate Installation Standoff - Level 2<a class="headerlink" href="#calculate-installation-standoff-level-2" title="Link to this heading">#</a></h2>
<p>Let’s take a closer look at the function and some optional parameters.</p>
<ul class="simple">
<li><p>level : 1 or 2 (see IEC TS 63216)</p></li>
<li><p>tilt and azimuth : tilt from horizontal of PV module and azimuth in degrees from North</p></li>
<li><p>sky_model : pvlib compatible model for generating sky characteristics (Options: ‘isotropic’, ‘klucher’, ‘haydavies’, ‘reindl’, ‘king’, ‘perez’)</p></li>
<li><p>temp_model : pvlib compatible module temperature model (Options: ‘sapm’, ‘pvsyst’, ‘faiman’, ‘sandia’)</p></li>
<li><p>module_type : basic module construction (Options: ‘glass_polymer’, ‘glass_glass’)</p></li>
<li><p>x_0 : thermal decay constant [cm] (see documentation)</p></li>
<li><p>wind_speed_factor : Wind speed correction factor to account for different wind speed measurement heights between weather database (e.g. NSRDB) and the tempeature model (e.g. SAPM)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">standoff</span> <span class="o">=</span> <span class="n">pvdeg</span><span class="o">.</span><span class="n">standards</span><span class="o">.</span><span class="n">standoff</span><span class="p">(</span><span class="n">weather_df</span><span class="o">=</span><span class="n">weather_df</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">,</span> <span class="n">T98</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The array tilt angle was not provided, therefore the latitude tilt of 33.5 was used.
The array azimuth was not provided, therefore an azimuth of 180.0 was used.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Minimum installation distance:&quot;</span><span class="p">,</span> <span class="n">standoff</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Minimum installation distance: 0    11.12151
Name: x, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "NREL/PVDegradationTools",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./tutorials_and_tools"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>






                <footer class="prev-next-footer">

<div class="prev-next-area">
    <a class="left-prev"
       href="LETID%20-%20Passivated%20Wafer.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">LETID - Passivated Wafer</p>
      </div>
    </a>
</div>
                </footer>

            </div>



                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-weather-data">1. Import Weather Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where-to-get-free-solar-irradiance-data">Where to get <em>Free</em> Solar Irradiance Data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where-else-can-you-get-historical-irradiance-data">Where else can you get historical irradiance data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nrel-api-key">NREL API Key</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#application-programming-interface-api">Application Programming Interface (API)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fetching-tmys-from-the-nsrdb">Fetching TMYs from the NSRDB</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-installation-standoff-level-1">2. Calculate Installation Standoff - Level 1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-installation-standoff-level-2">3. Calculate Installation Standoff - Level 2</a></li>
</ul>
  </nav></div>

</div></div>


          </div>
          <footer class="bd-footer-content">

<div class="bd-footer-content__inner container">

  <div class="footer-item">

<p class="component-author">
By Matthew Brown, Silvana Ovaitt
</p>

  </div>

  <div class="footer-item">


  <p class="copyright">

      © Copyright 2023.
      <br/>

  </p>

  </div>

  <div class="footer-item">

  </div>

  <div class="footer-item">

  </div>

</div>
          </footer>


      </main>
    </div>
  </div>

  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
